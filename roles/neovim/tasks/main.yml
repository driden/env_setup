---
- name: Ensure Autoload directory exists
  file:
    path: "{{ lookup('env', 'XDG_DATA_HOME') | default('$HOME/.local/share', True) }}/nvim/site/autoload"
    state: directory
  register: plug_dir

- name: Download 'Vim Plug' File
  get_url:
    url: https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
    dest:  "{{ plug_dir.path }}/plug.vim"
    force: false
    mode: '0755'

- name: Ensure Packer directory exists
  file:
    path: "{{ lookup('env', 'XDG_DATA_HOME') | default('$HOME/.local/share', True) }}/nvim/site/pack/packer/start/packer.nvim"
    state: directory
  register: packer_dir

- name: debug packer dir
  debug:
    msg: "{{ packer_dir.path }}"

- name: Clone 'Packer'
  git:
    repo: "https://github.com/wbthomason/packer.nvim"
    dest: "{{ packer_dir.path }}"
    accept_hostkey: true
    depth: 1
